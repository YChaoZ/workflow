# 🧪 MVP2功能快速测试指南

## 📋 测试前准备

### 1. 确认服务运行状态

#### 后端服务
```bash
# 检查后端是否运行
ps aux | grep "workflow-system.*jar"

# 如果未运行，启动后端
cd /Users/yanchao/IdeaProjects/workFolw/backend
./启动脚本.sh

# 或手动启动
/opt/homebrew/Cellar/openjdk@17/17.0.15/libexec/openjdk.jdk/Contents/Home/bin/java \
  -jar target/workflow-system-1.0.0-SNAPSHOT.jar \
  --spring.profiles.active=dev
```

**访问地址：**
- 后端API：http://localhost:9099
- 接口文档：http://localhost:9099/doc.html
- Druid监控：http://localhost:9099/druid/

#### 前端服务
```bash
# 检查前端是否运行
ps aux | grep "vite"

# 如果未运行，启动前端
cd /Users/yanchao/IdeaProjects/workFolw/frontend
npm run dev
```

**访问地址：**
- 前端应用：http://localhost:5173

---

## 🧪 功能测试步骤

### 测试1：登录系统 ✅

1. 访问 http://localhost:5173
2. 输入用户名：`admin`
3. 输入密码：`admin123`
4. 点击"登录"按钮

**预期结果：**
- ✅ 登录成功，跳转到首页
- ✅ 左侧菜单正常显示
- ✅ 顶部显示用户信息

---

### 测试2：流程设计器 ✨

#### 2.1 访问流程设计器
1. 点击左侧菜单：**流程管理 → 流程设计**
2. 页面加载流程设计器

**预期结果：**
- ✅ 左侧显示工具栏（事件、任务、网关、其他）
- ✅ 中间显示画布
- ✅ 右侧显示属性面板
- ✅ 顶部显示工具按钮（新建、打开、保存、导出等）

#### 2.2 创建简单流程
1. 从左侧工具栏拖拽**开始事件**到画布
2. 拖拽**用户任务**到画布
3. 拖拽**结束事件**到画布
4. 点击开始事件，拖动连线到用户任务
5. 点击用户任务，拖动连线到结束事件

**预期结果：**
- ✅ 元素成功拖拽到画布
- ✅ 连线正常显示
- ✅ 点击元素，右侧属性面板显示属性

#### 2.3 配置节点属性
1. 点击**用户任务**节点
2. 在右侧属性面板中修改：
   - Name（名称）：`审批任务`
   - ID：`approvalTask`
   - Assignee（办理人）：`admin`

**预期结果：**
- ✅ 属性修改成功
- ✅ 节点显示名称更新

#### 2.4 导出流程
1. 点击顶部工具栏"导出XML"按钮
2. 点击顶部工具栏"导出SVG"按钮

**预期结果：**
- ✅ 成功下载`.bpmn`文件
- ✅ 成功下载`.svg`文件

#### 2.5 预览流程
1. 点击顶部工具栏"预览"按钮

**预期结果：**
- ✅ 弹出对话框
- ✅ 显示流程图SVG

---

### 测试3：流程定义管理 ✨

#### 3.1 访问流程定义列表
1. 点击左侧菜单：**流程管理 → 流程定义**

**预期结果：**
- ✅ 显示流程定义列表（如果有）
- ✅ 显示搜索栏和"部署流程"按钮

#### 3.2 部署新流程
1. 点击"部署流程"按钮
2. 输入流程名称：`测试流程`
3. 输入流程分类：`测试`
4. 上传之前导出的`.bpmn`文件
5. 点击"确认部署"

**预期结果：**
- ✅ 上传成功
- ✅ 提示"部署成功"
- ✅ 列表中显示新部署的流程

#### 3.3 查看流程图
1. 在流程定义列表中，点击某个流程的"流程图"按钮

**预期结果：**
- ✅ 弹出对话框
- ✅ 显示流程图（SVG格式）

#### 3.4 编辑流程
1. 点击某个流程的"编辑"按钮

**预期结果：**
- ✅ 跳转到流程设计器
- ✅ 流程XML自动加载到画布

#### 3.5 挂起/激活流程
1. 对于激活状态的流程，点击"挂起"按钮
2. 对于挂起状态的流程，点击"激活"按钮

**预期结果：**
- ✅ 操作成功
- ✅ 状态标签更新

#### 3.6 删除流程
1. 点击某个流程的"删除"按钮
2. 确认删除

**预期结果：**
- ✅ 提示确认对话框
- ✅ 删除成功
- ✅ 列表中移除该流程

#### 3.7 搜索流程
1. 在搜索栏输入流程标识/名称/分类
2. 点击"查询"按钮

**预期结果：**
- ✅ 根据搜索条件过滤列表

---

### 测试4：流程实例管理 ✨

#### 4.1 启动流程实例
1. 点击左侧菜单：**流程管理 → 流程实例**
2. 点击"发起流程"按钮
3. 选择流程定义
4. 输入业务Key（可选）
5. 点击"确认发起"

**预期结果：**
- ✅ 流程实例启动成功
- ✅ 列表中显示新流程实例

#### 4.2 查看流程实例详情
1. 在流程实例列表中，点击某个实例的"详情"按钮

**预期结果：**
- ✅ 跳转到详情页面
- ✅ 显示流程实例基本信息
- ✅ 显示带高亮的流程图（已完成的节点为绿色）
- ✅ 显示任务历史时间线

---

### 测试5：任务管理 ✅（MVP1已完成）

#### 5.1 查看待办任务
1. 点击左侧菜单：**任务管理 → 待办任务**

**预期结果：**
- ✅ 显示当前用户的待办任务列表
- ✅ 每个任务显示：流程名称、任务名称、创建时间、操作按钮

#### 5.2 完成任务
1. 在待办任务列表中，点击某个任务的"完成"按钮

**预期结果：**
- ✅ 任务完成成功
- ✅ 任务从待办列表移除
- ✅ 任务出现在已办列表

#### 5.3 查看已办任务
1. 点击左侧菜单：**任务管理 → 已办任务**

**预期结果：**
- ✅ 显示当前用户的已办任务列表

---

## 🐛 已知问题和限制

### 1. 后端部分功能暂时禁用 ⚠️

以下功能由于MyBatis-Plus兼容性问题暂时无法测试：
- ❌ 流程分类管理
- ❌ 任务意见功能
- ❌ 任务附件功能

**影响范围：**
- 流程定义管理页面的"流程分类"搜索和选择功能
- 任务详情页面的"意见"和"附件"功能

### 2. 部分API接口未联调 ⚠️

由于后端功能禁用，以下前端功能无法与后端完整联调：
- 流程分类树形结构展示
- 任务意见的添加、删除、查询
- 任务附件的上传、下载、删除

**临时解决方案：**
- 前端功能已实现，等后端兼容性问题解决后即可联调

---

## ✅ 测试检查清单

### 前端功能（100%）
- [x] 用户登录
- [x] 流程设计器
  - [x] 工具栏元素拖拽
  - [x] 属性面板配置
  - [x] 导出XML/SVG
  - [x] 预览流程
- [x] 流程定义管理
  - [x] 列表展示
  - [x] 部署流程
  - [x] 查看流程图
  - [x] 编辑流程
  - [x] 挂起/激活
  - [x] 删除流程
  - [x] 搜索功能
- [x] 流程实例详情
  - [x] 基本信息展示
  - [x] 流程图高亮显示
  - [x] 任务历史时间线
- [x] 任务管理
  - [x] 待办任务列表
  - [x] 已办任务列表
  - [x] 完成任务

### 后端功能（80%）
- [x] 用户认证授权
- [x] 流程定义API
- [x] 流程实例API
- [x] 任务管理API
- [x] 历史流程查询
- [x] 流程图生成API
- [ ] 流程分类管理（暂时禁用）
- [ ] 任务意见功能（暂时禁用）
- [ ] 任务附件功能（暂时禁用）

---

## 📊 测试结果总结

### 成功测试的功能
- ✅ **流程设计器：** 完全正常，拖拽、配置、导出功能良好
- ✅ **流程定义管理：** 列表、部署、查看、编辑、删除功能正常
- ✅ **流程实例详情：** 详情展示、流程图高亮功能正常
- ✅ **任务管理：** 待办任务、已办任务功能正常

### 需要后续测试的功能
- ⚠️ **流程分类管理：** 等后端兼容性问题解决后测试
- ⚠️ **任务意见功能：** 等后端兼容性问题解决后测试
- ⚠️ **任务附件功能：** 等后端兼容性问题解决后测试

---

## 🚀 下一步行动

1. **优先级1：解决后端兼容性问题**
   - 升级Spring Boot版本
   - 或使用MyBatis原生配置
   - 恢复被禁用的功能

2. **优先级2：完整联调测试**
   - 恢复功能后进行完整的前后端联调
   - 测试所有API接口
   - 验证数据一致性

3. **优先级3：性能测试**
   - 流程设计器性能测试
   - 大数据量查询测试
   - 并发测试

---

## 📞 问题反馈

如果在测试过程中发现任何问题，请记录以下信息：

1. **问题描述**
2. **复现步骤**
3. **预期结果**
4. **实际结果**
5. **浏览器版本**
6. **控制台错误信息**

---

**测试指南版本：** v1.0  
**更新时间：** 2025-11-05  
**适用版本：** MVP2  

