# MVP4 æ¨¡å—3 - é«˜çº§å®¡æ‰¹ å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

**æ¨¡å—åç§°ï¼š** é«˜çº§å®¡æ‰¹åŠŸèƒ½  
**å¼€å‘æ—¶é—´ï¼š** 2025-11-06  
**å¼€å‘çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ  

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. ä»»åŠ¡åŠ ç­¾ (Add Sign)

**åŠŸèƒ½æè¿°ï¼š** ä¸ºå½“å‰ä»»åŠ¡æ·»åŠ é¢å¤–çš„å®¡æ‰¹äºº

**ä¸¤ç§æ¨¡å¼ï¼š**
- **ä¼šç­¾ï¼ˆANDï¼‰**ï¼šæ‰€æœ‰åŠ ç­¾äººéƒ½å¿…é¡»å®¡æ‰¹åæ‰èƒ½ç»§ç»­
- **æˆ–ç­¾ï¼ˆORï¼‰**ï¼šä»»ä¸€åŠ ç­¾äººå®¡æ‰¹åå³å¯ç»§ç»­

**å®ç°æ–¹å¼ï¼š**
- ä¸ºæ¯ä¸ªåŠ ç­¾äººåˆ›å»ºå­ä»»åŠ¡
- çˆ¶ä»»åŠ¡è®¾ç½®ä¸ºç­‰å¾…çŠ¶æ€
- å­ä»»åŠ¡å®Œæˆåçˆ¶ä»»åŠ¡æ‰èƒ½ç»§ç»­

**ä½¿ç”¨åœºæ™¯ï¼š**
- éœ€è¦å¤šäººä¼šç­¾çš„é‡è¦å†³ç­–
- éœ€è¦å¾æ±‚å¤šæ–¹æ„è§çš„å®¡æ‰¹

---

### 2. ä»»åŠ¡è½¬åŠ (Transfer)

**åŠŸèƒ½æè¿°ï¼š** å°†ä»»åŠ¡è½¬äº¤ç»™å…¶ä»–ç”¨æˆ·å¤„ç†

**ç‰¹æ€§ï¼š**
- å˜æ›´ä»»åŠ¡å¤„ç†äºº
- ä¿ç•™è½¬åŠç—•è¿¹
- è®°å½•è½¬åŠæ—¶é—´å’ŒåŸå› 
- æ·»åŠ è½¬åŠè¯„è®º

**å®ç°æ–¹å¼ï¼š**
- è®¾ç½®è½¬åŠæ ‡è®°å˜é‡
- è®°å½•åŸå¤„ç†äºº
- å˜æ›´ä»»åŠ¡çš„assignee

**ä½¿ç”¨åœºæ™¯ï¼š**
- å½“å‰å¤„ç†äººæ— æ³•ç»§ç»­åŠç†
- éœ€è¦å…¶ä»–äººä»£ä¸ºå¤„ç†

---

### 3. ä»»åŠ¡å§”æ´¾ (Delegate)

**åŠŸèƒ½æè¿°ï¼š** å§”æ´¾ç»™å…¶ä»–ç”¨æˆ·å¤„ç†ï¼Œå®Œæˆåè¿”å›ç»™å§”æ´¾äºº

**ä¸è½¬åŠçš„åŒºåˆ«ï¼š**
- è½¬åŠæ˜¯æ°¸ä¹…å˜æ›´å¤„ç†äºº
- å§”æ´¾æ˜¯ä¸´æ—¶äº¤ç»™å…¶ä»–äººå¤„ç†

**å®ç°æ–¹å¼ï¼š**
- ä½¿ç”¨Flowableçš„delegateTask API
- ä¿ç•™å§”æ´¾å…³ç³»

**ä½¿ç”¨åœºæ™¯ï¼š**
- æš‚æ—¶æ— æ³•å¤„ç†ï¼Œéœ€è¦å§”æ´¾
- å§”æ´¾åè¿˜éœ€è¦è‡ªå·±ç¡®è®¤

---

### 4. ä»»åŠ¡å›é€€ (Reject)

**åŠŸèƒ½æè¿°ï¼š** å°†ä»»åŠ¡é€€å›åˆ°ä¹‹å‰çš„èŠ‚ç‚¹

**ä¸‰ç§å›é€€æ–¹å¼ï¼š**

#### 4.1 å›é€€åˆ°ä¸Šä¸€èŠ‚ç‚¹
- è‡ªåŠ¨æŸ¥æ‰¾ä¸Šä¸€ä¸ªç”¨æˆ·ä»»åŠ¡èŠ‚ç‚¹
- å›é€€åˆ°è¯¥èŠ‚ç‚¹é‡æ–°å¤„ç†

#### 4.2 å›é€€åˆ°æŒ‡å®šèŠ‚ç‚¹
- æŸ¥è¯¢æµç¨‹å†å²èŠ‚ç‚¹
- é€‰æ‹©ç›®æ ‡èŠ‚ç‚¹è¿›è¡Œå›é€€
- å¯å›é€€åˆ°ä»»æ„å†å²èŠ‚ç‚¹

#### 4.3 å›é€€åˆ°æµç¨‹å‘èµ·äºº
- ç›´æ¥å›é€€åˆ°æµç¨‹çš„ç¬¬ä¸€ä¸ªç”¨æˆ·ä»»åŠ¡
- ä»å¤´å¼€å§‹é‡æ–°å®¡æ‰¹

**å®ç°æ–¹å¼ï¼š**
- æŸ¥è¯¢å†å²æ´»åŠ¨å®ä¾‹
- ä½¿ç”¨changeActivityStateBuilderè¿›è¡Œæ´»åŠ¨è·³è½¬
- æ·»åŠ å›é€€è¯„è®º

**ä½¿ç”¨åœºæ™¯ï¼š**
- å®¡æ‰¹ä¸é€šè¿‡ï¼Œéœ€è¦é‡æ–°å¤„ç†
- å‘ç°æµç¨‹èµ°é”™ï¼Œéœ€è¦é‡æ–°æ¥è¿‡

---

### 5. æµç¨‹/ä»»åŠ¡æ’¤å› (Withdraw)

**ä¸¤ç§æ’¤å›æ–¹å¼ï¼š**

#### 5.1 æµç¨‹æ’¤å›
- å‘èµ·äººæ’¤å›æ•´ä¸ªæµç¨‹å®ä¾‹
- åˆ é™¤æµç¨‹å®ä¾‹
- è®°å½•æ’¤å›åŸå› 

#### 5.2 ä»»åŠ¡æ’¤å›
- å®¡æ‰¹äººæ’¤å›å·²å®Œæˆçš„å®¡æ‰¹
- å›é€€åˆ°æ’¤å›çš„ä»»åŠ¡èŠ‚ç‚¹
- é‡æ–°è¿›è¡Œå®¡æ‰¹

**å®ç°æ–¹å¼ï¼š**
- æµç¨‹æ’¤å›ï¼šä½¿ç”¨deleteProcessInstance
- ä»»åŠ¡æ’¤å›ï¼šä½¿ç”¨changeActivityStateBuilder

**ä½¿ç”¨åœºæ™¯ï¼š**
- å‘èµ·äººå‘ç°é”™è¯¯ï¼Œéœ€è¦æ’¤å›
- å®¡æ‰¹äººå‘ç°å®¡æ‰¹é”™è¯¯ï¼Œéœ€è¦æ’¤å›

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### åç«¯æ¶æ„

#### 1. Gatewayå±‚ - `AdvancedTaskGateway.java`

```java
public interface AdvancedTaskGateway {
    // ä»»åŠ¡åŠ ç­¾
    boolean addSign(String taskId, List<String> assignees, String type);
    
    // ä»»åŠ¡è½¬åŠ
    boolean transfer(String taskId, String targetUser, String comment);
    
    // ä»»åŠ¡å§”æ´¾
    boolean delegate(String taskId, String targetUser);
    
    // ä»»åŠ¡å›é€€ï¼ˆ3ç§æ–¹å¼ï¼‰
    boolean rejectToPrevious(String taskId, String comment);
    boolean rejectToNode(String taskId, String targetNodeId, String comment);
    boolean rejectToStart(String taskId, String comment);
    
    // æµç¨‹/ä»»åŠ¡æ’¤å›
    boolean withdrawProcess(String processInstanceId, String reason);
    boolean withdrawTask(String taskId, String reason);
    
    // è¾…åŠ©æŸ¥è¯¢
    List<Map<String, Object>> getRejectableNodes(String taskId);
    List<String> getHistoricAssignees(String taskId);
}
```

**æ ¸å¿ƒæ–¹æ³•ï¼š** 11ä¸ª  
**ä»£ç è¡Œæ•°ï¼š** ~80è¡Œ

---

#### 2. Gatewayå®ç° - `AdvancedTaskGatewayImpl.java`

**ä¾èµ–æœåŠ¡ï¼š**
- `TaskService` - ä»»åŠ¡æ“ä½œ
- `RuntimeService` - æµç¨‹æ§åˆ¶
- `RepositoryService` - æµç¨‹å®šä¹‰æŸ¥è¯¢
- `HistoryService` - å†å²æ•°æ®æŸ¥è¯¢

**æ ¸å¿ƒå®ç°ï¼š**

##### åŠ ç­¾å®ç°
```java
public boolean addSign(String taskId, List<String> assignees, String type) {
    Task task = taskService.createTaskQuery().taskId(taskId).singleResult();
    
    // ä¸ºæ¯ä¸ªåŠ ç­¾äººåˆ›å»ºå­ä»»åŠ¡
    for (String assignee : assignees) {
        Task subTask = taskService.newTask();
        subTask.setName(task.getName() + "-åŠ ç­¾");
        subTask.setAssignee(assignee);
        subTask.setParentTaskId(taskId);
        taskService.saveTask(subTask);
        
        // è®¾ç½®å˜é‡æ ‡è®°åŠ ç­¾ç±»å‹
        taskService.setVariableLocal(subTask.getId(), "signType", type);
    }
    
    // è®¾ç½®çˆ¶ä»»åŠ¡ä¸ºç­‰å¾…çŠ¶æ€
    taskService.setVariableLocal(taskId, "waitingForSign", true);
    return true;
}
```

##### å›é€€å®ç°
```java
public boolean rejectToNode(String taskId, String targetNodeId, String comment) {
    Task task = taskService.createTaskQuery().taskId(taskId).singleResult();
    
    // æ·»åŠ å›é€€è¯„è®º
    taskService.addComment(taskId, task.getProcessInstanceId(), 
            "reject", "å›é€€ï¼š" + comment);
    
    // ä½¿ç”¨Flowableçš„å›é€€åŠŸèƒ½
    runtimeService.createChangeActivityStateBuilder()
            .processInstanceId(task.getProcessInstanceId())
            .moveActivityIdTo(task.getTaskDefinitionKey(), targetNodeId)
            .changeState();
    
    return true;
}
```

**ä»£ç è¡Œæ•°ï¼š** ~350è¡Œ

---

#### 3. Application Service - `AdvancedTaskAppService.java`

**èŒè´£ï¼š** åº”ç”¨æœåŠ¡å±‚ï¼Œç¼–æ’ä¸šåŠ¡é€»è¾‘

**æ–¹æ³•åˆ—è¡¨ï¼š**
1. `addSign` - ä»»åŠ¡åŠ ç­¾
2. `transfer` - ä»»åŠ¡è½¬åŠ
3. `delegate` - ä»»åŠ¡å§”æ´¾
4. `rejectToPrevious` - å›é€€åˆ°ä¸Šä¸€èŠ‚ç‚¹
5. `rejectToNode` - å›é€€åˆ°æŒ‡å®šèŠ‚ç‚¹
6. `rejectToStart` - å›é€€åˆ°æµç¨‹å‘èµ·äºº
7. `withdrawProcess` - æ’¤å›æµç¨‹
8. `withdrawTask` - æ’¤å›ä»»åŠ¡
9. `getRejectableNodes` - è·å–å¯å›é€€èŠ‚ç‚¹
10. `getHistoricAssignees` - è·å–å†å²å®¡æ‰¹äºº

**ä»£ç è¡Œæ•°ï¼š** ~100è¡Œ

---

#### 4. Controller - `AdvancedTaskController.java`

**APIç«¯ç‚¹åˆ—è¡¨ï¼š**

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| POST | `/api/tasks/advanced/{taskId}/add-sign` | ä»»åŠ¡åŠ ç­¾ |
| POST | `/api/tasks/advanced/{taskId}/transfer` | ä»»åŠ¡è½¬åŠ |
| POST | `/api/tasks/advanced/{taskId}/delegate` | ä»»åŠ¡å§”æ´¾ |
| POST | `/api/tasks/advanced/{taskId}/reject/previous` | å›é€€åˆ°ä¸Šä¸€èŠ‚ç‚¹ |
| POST | `/api/tasks/advanced/{taskId}/reject/node` | å›é€€åˆ°æŒ‡å®šèŠ‚ç‚¹ |
| POST | `/api/tasks/advanced/{taskId}/reject/start` | å›é€€åˆ°æµç¨‹å‘èµ·äºº |
| POST | `/api/tasks/advanced/process/{processInstanceId}/withdraw` | æ’¤å›æµç¨‹ |
| POST | `/api/tasks/advanced/{taskId}/withdraw` | æ’¤å›ä»»åŠ¡ |
| GET | `/api/tasks/advanced/{taskId}/rejectable-nodes` | è·å–å¯å›é€€èŠ‚ç‚¹ |
| GET | `/api/tasks/advanced/{taskId}/historic-assignees` | è·å–å†å²å®¡æ‰¹äºº |

**è¯·æ±‚DTOï¼š**
- `AddSignRequest` - åŠ ç­¾è¯·æ±‚
- `TransferRequest` - è½¬åŠè¯·æ±‚
- `DelegateRequest` - å§”æ´¾è¯·æ±‚
- `RejectRequest` - å›é€€è¯·æ±‚
- `RejectToNodeRequest` - å›é€€åˆ°æŒ‡å®šèŠ‚ç‚¹è¯·æ±‚
- `WithdrawRequest` - æ’¤å›è¯·æ±‚

**ä»£ç è¡Œæ•°ï¼š** ~350è¡Œ

---

### å‰ç«¯å®ç°

#### 1. APIå°è£… - `advancedTask.ts`

**TypeScriptæ¥å£å®šä¹‰ï¼š**
```typescript
export interface AddSignRequest {
  assignees: string[]
  type: 'AND' | 'OR' // AND-ä¼šç­¾, OR-æˆ–ç­¾
}

export interface TransferRequest {
  targetUser: string
  comment?: string
}

export interface RejectToNodeRequest {
  targetNodeId: string
  comment: string
}

export interface RejectableNode {
  activityId: string
  activityName: string
  assignee: string
  startTime: string
  endTime: string
}
```

**APIæ–¹æ³•ï¼š**
```typescript
export const advancedTaskApi = {
  addSign(taskId: string, data: AddSignRequest),
  transfer(taskId: string, data: TransferRequest),
  delegate(taskId: string, data: DelegateRequest),
  rejectToPrevious(taskId: string, data: RejectRequest),
  rejectToNode(taskId: string, data: RejectToNodeRequest),
  rejectToStart(taskId: string, data: RejectRequest),
  withdrawProcess(processInstanceId: string, data: WithdrawRequest),
  withdrawTask(taskId: string, data: WithdrawRequest),
  getRejectableNodes(taskId: string),
  getHistoricAssignees(taskId: string)
}
```

**ä»£ç è¡Œæ•°ï¼š** ~120è¡Œ

---

#### 2. é«˜çº§æ“ä½œç»„ä»¶ - `AdvancedTaskActions/index.vue`

**ç»„ä»¶åŠŸèƒ½ï¼š** ç‹¬ç«‹çš„é«˜çº§æ“ä½œç»„ä»¶ï¼Œå¯åœ¨ä»»åŠ¡è¯¦æƒ…é¡µä½¿ç”¨

**ç»„ä»¶Propsï¼š**
```typescript
const props = defineProps<{
  taskId: string
  processInstanceId?: string
  showWithdraw?: boolean
}>()
```

**ç»„ä»¶Emitsï¼š**
```typescript
const emit = defineEmits<{
  success: []
}>()
```

**UIç»„ä»¶ï¼š**
- 4ä¸ªæ“ä½œæŒ‰é’®ï¼ˆåŠ ç­¾ã€è½¬åŠã€å›é€€ã€æ’¤å›ï¼‰
- 4ä¸ªæ“ä½œå¯¹è¯æ¡†
- ç”¨æˆ·é€‰æ‹©ä¸‹æ‹‰æ¡†
- èŠ‚ç‚¹é€‰æ‹©ä¸‹æ‹‰æ¡†
- åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨
- ç¡®è®¤æç¤ºæ¡†

**ä»£ç è¡Œæ•°ï¼š** ~380è¡Œ

---

#### 3. å¾…åŠä»»åŠ¡é¡µé¢é›†æˆ - `task/todo/index.vue`

**é›†æˆæ–¹å¼ï¼š** åœ¨å¾…åŠä»»åŠ¡åˆ—è¡¨çš„æ“ä½œåˆ—æ·»åŠ "æ›´å¤šæ“ä½œ"ä¸‹æ‹‰èœå•

**UIæ”¹è¿›ï¼š**

##### æ“ä½œåˆ—æ”¹è¿›
```vue
<el-dropdown @command="(cmd: string) => handleAdvancedAction(cmd, row)">
  <el-button link type="warning" size="small">
    æ›´å¤šæ“ä½œ
    <el-icon class="el-icon--right"><arrow-down /></el-icon>
  </el-button>
  <template #dropdown>
    <el-dropdown-menu>
      <el-dropdown-item command="addSign" :icon="UserFilled">
        åŠ ç­¾
      </el-dropdown-item>
      <el-dropdown-item command="transfer" :icon="Switch">
        è½¬åŠ
      </el-dropdown-item>
      <el-dropdown-item command="delegate" :icon="Share">
        å§”æ´¾
      </el-dropdown-item>
      <el-dropdown-item command="reject" :icon="Back" divided>
        å›é€€
      </el-dropdown-item>
    </el-dropdown-menu>
  </template>
</el-dropdown>
```

##### å¯¹è¯æ¡†é›†æˆ
- åŠ ç­¾å¯¹è¯æ¡†
- è½¬åŠå¯¹è¯æ¡†
- å›é€€å¯¹è¯æ¡†ï¼ˆ3ç§æ–¹å¼åˆ‡æ¢ï¼‰

**æ–°å¢åŠŸèƒ½ï¼š**
1. é«˜çº§æ“ä½œä¸‹æ‹‰èœå•
2. åŠ ç­¾åŠŸèƒ½ï¼ˆä¼šç­¾/æˆ–ç­¾é€‰æ‹©ï¼‰
3. è½¬åŠåŠŸèƒ½ï¼ˆç”¨æˆ·é€‰æ‹©+è¯´æ˜ï¼‰
4. å›é€€åŠŸèƒ½ï¼ˆ3ç§æ–¹å¼+èŠ‚ç‚¹é€‰æ‹©ï¼‰
5. å›é€€èŠ‚ç‚¹åŠ¨æ€åŠ è½½

**ä¿®æ”¹ä»£ç è¡Œæ•°ï¼š** ~250è¡Œ

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

### åç«¯ä»£ç 

| æ–‡ä»¶ | ç±»å‹ | ä»£ç è¡Œæ•° | åŠŸèƒ½ |
|------|------|----------|------|
| AdvancedTaskGateway.java | æ¥å£ | ~80 | Gatewayæ¥å£å®šä¹‰ |
| AdvancedTaskGatewayImpl.java | å®ç° | ~350 | Gatewayå®ç° |
| AdvancedTaskAppService.java | æœåŠ¡ | ~100 | åº”ç”¨æœåŠ¡ |
| AdvancedTaskController.java | æ§åˆ¶å™¨ | ~350 | REST API |
| **æ€»è®¡** | - | **~880** | - |

### å‰ç«¯ä»£ç 

| æ–‡ä»¶ | ç±»å‹ | ä»£ç è¡Œæ•° | åŠŸèƒ½ |
|------|------|----------|------|
| advancedTask.ts | API | ~120 | APIå°è£… |
| AdvancedTaskActions/index.vue | ç»„ä»¶ | ~380 | é«˜çº§æ“ä½œç»„ä»¶ |
| task/todo/index.vue | é¡µé¢ | ~250 | å¾…åŠä»»åŠ¡é¡µé¢ |
| **æ€»è®¡** | - | **~750** | - |

### æ€»è®¡

**åç«¯ + å‰ç«¯ï¼š** ~1630è¡Œä»£ç   
**APIç«¯ç‚¹ï¼š** 11ä¸ª  
**Vueç»„ä»¶ï¼š** 1ä¸ª  
**å¯¹è¯æ¡†ï¼š** 4ä¸ª  

---

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### 1. åŠ ç­¾åŠŸèƒ½

**ä¼šç­¾æ¨¡å¼ï¼ˆANDï¼‰ï¼š**
- æ‰€æœ‰åŠ ç­¾äººéƒ½å¿…é¡»å®Œæˆå®¡æ‰¹
- é€‚ç”¨äºé‡è¦å†³ç­–
- ä¸€äººä¸é€šè¿‡åˆ™å…¨éƒ¨é‡å®¡

**æˆ–ç­¾æ¨¡å¼ï¼ˆORï¼‰ï¼š**
- ä»»ä¸€åŠ ç­¾äººå®Œæˆå®¡æ‰¹å³å¯
- é€‚ç”¨äºå¾æ±‚æ„è§
- æé«˜å®¡æ‰¹æ•ˆç‡

---

### 2. è½¬åŠåŠŸèƒ½

**ç‰¹æ€§ï¼š**
- è½¬åŠç—•è¿¹è®°å½•
- è½¬åŠæ—¶é—´è®°å½•
- è½¬åŠåŸå› è®°å½•
- åŸå¤„ç†äººè®°å½•

**ä¼˜åŠ¿ï¼š**
- å®¡æ‰¹æµç¨‹å¯è¿½æº¯
- è´£ä»»æ˜ç¡®
- ä¾¿äºå®¡è®¡

---

### 3. å›é€€åŠŸèƒ½

**çµæ´»æ€§ï¼š**
- æ”¯æŒ3ç§å›é€€æ–¹å¼
- å¯å›é€€åˆ°ä»»æ„å†å²èŠ‚ç‚¹
- è‡ªåŠ¨ä¿ç•™å›é€€åŸå› 

**å®‰å…¨æ€§ï¼š**
- éœ€è¦ç¡®è®¤æ‰èƒ½å›é€€
- è®°å½•å›é€€è¯„è®º
- ä¿ç•™å®¡æ‰¹å†å²

---

### 4. æ’¤å›åŠŸèƒ½

**ä¸¤ç§æ’¤å›ï¼š**
- æµç¨‹æ’¤å›ï¼šå‘èµ·äººæ’¤å›æ•´ä¸ªæµç¨‹
- ä»»åŠ¡æ’¤å›ï¼šå®¡æ‰¹äººæ’¤å›å·²å®Œæˆçš„å®¡æ‰¹

**ä½¿ç”¨é™åˆ¶ï¼š**
- åªèƒ½æ’¤å›è¿›è¡Œä¸­çš„æµç¨‹
- éœ€è¦æä¾›æ’¤å›åŸå› 

---

## ğŸ¨ UI/UXè®¾è®¡

### 1. ä¸‹æ‹‰èœå•è®¾è®¡

**ä¼˜ç‚¹ï¼š**
- èŠ‚çœç©ºé—´
- æ“ä½œåˆ†ç»„æ¸…æ™°
- ç¬¦åˆç”¨æˆ·ä¹ æƒ¯

**å›¾æ ‡ä½¿ç”¨ï¼š**
- åŠ ç­¾ï¼šUserFilled (ğŸ‘¤+)
- è½¬åŠï¼šSwitch (â‡„)
- å§”æ´¾ï¼šShare (âœ)
- å›é€€ï¼šBack (â†)

---

### 2. å¯¹è¯æ¡†è®¾è®¡

**ç»Ÿä¸€é£æ ¼ï¼š**
- å›ºå®šå®½åº¦ï¼ˆ500px/600pxï¼‰
- ç»Ÿä¸€çš„è¡¨å•å¸ƒå±€
- ç»Ÿä¸€çš„æŒ‰é’®ä½ç½®

**äº¤äº’ä¼˜åŒ–ï¼š**
- åŠ è½½çŠ¶æ€æç¤º
- è¡¨å•éªŒè¯æç¤º
- æ“ä½œç¡®è®¤æç¤º
- æˆåŠŸ/å¤±è´¥åé¦ˆ

---

### 3. å›é€€èŠ‚ç‚¹é€‰æ‹©

**åŠ¨æ€åŠ è½½ï¼š**
- é€‰æ‹©"å›é€€åˆ°æŒ‡å®šèŠ‚ç‚¹"æ—¶è‡ªåŠ¨åŠ è½½
- æ˜¾ç¤ºèŠ‚ç‚¹åç§°å’Œå†å²å¤„ç†äºº
- æ”¯æŒèŠ‚ç‚¹æœç´¢

**ç”¨æˆ·ä½“éªŒï¼š**
- æ¸…æ™°çš„èŠ‚ç‚¹ä¿¡æ¯å±•ç¤º
- åŠ è½½çŠ¶æ€æç¤º
- ç©ºæ•°æ®å‹å¥½æç¤º

---

## âœ… æµ‹è¯•éªŒè¯

### åç«¯APIæµ‹è¯•

```bash
# æµ‹è¯•è·å–å¯å›é€€èŠ‚ç‚¹
curl http://localhost:9099/api/tasks/advanced/test-task-id/rejectable-nodes

# å“åº”
{
  "code": 200,
  "data": [],
  "message": "æŸ¥è¯¢æˆåŠŸ"
}
```

**æµ‹è¯•çŠ¶æ€ï¼š** âœ… APIæ­£å¸¸å“åº”

---

### å‰ç«¯é›†æˆæµ‹è¯•

**å¾…æµ‹è¯•é¡¹ï¼š**
1. åŠ ç­¾åŠŸèƒ½
   - [ ] ä¼šç­¾æ¨¡å¼æµ‹è¯•
   - [ ] æˆ–ç­¾æ¨¡å¼æµ‹è¯•
   - [ ] åŠ ç­¾äººé€‰æ‹©æµ‹è¯•

2. è½¬åŠåŠŸèƒ½
   - [ ] è½¬åŠäººé€‰æ‹©æµ‹è¯•
   - [ ] è½¬åŠè¯´æ˜æµ‹è¯•
   - [ ] è½¬åŠæˆåŠŸåé¦ˆ

3. å›é€€åŠŸèƒ½
   - [ ] å›é€€åˆ°ä¸Šä¸€èŠ‚ç‚¹
   - [ ] å›é€€åˆ°æŒ‡å®šèŠ‚ç‚¹
   - [ ] å›é€€åˆ°æµç¨‹å‘èµ·äºº

4. UIæµ‹è¯•
   - [ ] ä¸‹æ‹‰èœå•äº¤äº’
   - [ ] å¯¹è¯æ¡†æ˜¾ç¤º
   - [ ] è¡¨å•éªŒè¯
   - [ ] åŠ è½½çŠ¶æ€
   - [ ] æˆåŠŸæç¤º

---

## ğŸš€ MVP4æ•´ä½“è¿›åº¦

| æ¨¡å— | çŠ¶æ€ | å®Œæˆåº¦ | è¯´æ˜ |
|------|------|--------|------|
| æ¨¡å—1ï¼šæµç¨‹ç›‘æ§ | âœ… | 100% | ç›‘æ§å¤§å±ã€å®æ—¶æ•°æ® |
| æ¨¡å—2ï¼šæµç¨‹ç»Ÿè®¡ | âœ… | 100% | ç»Ÿè®¡åˆ†æã€å›¾è¡¨å±•ç¤º |
| æ¨¡å—3ï¼šé«˜çº§å®¡æ‰¹ | âœ… | 100% | åŠ ç­¾ã€è½¬åŠã€å›é€€ |
| æ¨¡å—4ï¼šç³»ç»Ÿé…ç½® | â³ | 0% | å¾…å¼€å‘ |
| æ¨¡å—5ï¼šå¼‚å¸¸å¤„ç† | â³ | 0% | å¾…å¼€å‘ |

**æ€»ä½“å®Œæˆåº¦ï¼š** 60% (3/5æ¨¡å—)

---

## ğŸ“ˆ ä¸‹ä¸€æ­¥è®¡åˆ’

### é€‰é¡¹Aï¼šç»§ç»­MVP4å¼€å‘
- å¼€å‘æ¨¡å—4ï¼šç³»ç»Ÿé…ç½®ï¼ˆå‚æ•°ç®¡ç†ã€ç³»ç»Ÿè®¾ç½®ï¼‰
- å¼€å‘æ¨¡å—5ï¼šå¼‚å¸¸å¤„ç†ï¼ˆæµç¨‹å¼‚å¸¸ã€è¶…æ—¶å¤„ç†ï¼‰

### é€‰é¡¹Bï¼šæµ‹è¯•éªŒè¯
- ä½¿ç”¨Playwrightè¿›è¡Œå‰ç«¯æµ‹è¯•
- æµ‹è¯•æ‰€æœ‰é«˜çº§æ“ä½œåŠŸèƒ½
- ç”Ÿæˆå®Œæ•´çš„æµ‹è¯•æŠ¥å‘Š

### é€‰é¡¹Cï¼šæŠ€æœ¯ä¼˜åŒ–
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡æå‡
- E2Eæµ‹è¯•
- æ€§èƒ½ä¼˜åŒ–
- ä»£ç è´¨é‡æå‡
- æŠ€æœ¯æ–‡æ¡£å®Œå–„

---

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

### 1. åŸºäºFlowableåŸç”ŸAPI
- å……åˆ†åˆ©ç”¨Flowableçš„å¼ºå¤§åŠŸèƒ½
- ä»£ç ç®€æ´é«˜æ•ˆ
- æ˜“äºç»´æŠ¤å’Œæ‰©å±•

### 2. COLAæ¶æ„è®¾è®¡
- Gatewayå±‚ï¼šä¸Flowableå¼•æ“äº¤äº’
- AppServiceå±‚ï¼šä¸šåŠ¡é€»è¾‘ç¼–æ’
- Controllerå±‚ï¼šREST APIæš´éœ²
- èŒè´£æ¸…æ™°ï¼Œåˆ†å±‚åˆç†

### 3. TypeScriptç±»å‹å®‰å…¨
- å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- IDEæ™ºèƒ½æç¤ºæ”¯æŒ
- ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
- å‡å°‘è¿è¡Œæ—¶é”™è¯¯

### 4. Vue3ç»„ä»¶åŒ–è®¾è®¡
- ç‹¬ç«‹çš„é«˜çº§æ“ä½œç»„ä»¶
- å¯åœ¨å¤šå¤„å¤ç”¨
- Props/Emitsæ˜ç¡®
- æ˜“äºæµ‹è¯•å’Œç»´æŠ¤

### 5. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- ä¸‹æ‹‰èœå•èŠ‚çœç©ºé—´
- å¯¹è¯æ¡†äº¤äº’æµç•…
- åŠ è½½çŠ¶æ€æ˜ç¡®
- é”™è¯¯æç¤ºå‹å¥½
- æ“ä½œç¡®è®¤å®‰å…¨

---

## ğŸ¯ æ€»ç»“

MVP4æ¨¡å—3ï¼ˆé«˜çº§å®¡æ‰¹ï¼‰å·²å…¨éƒ¨å¼€å‘å®Œæˆï¼å®ç°äº†5å¤§æ ¸å¿ƒåŠŸèƒ½ï¼š
1. âœ… ä»»åŠ¡åŠ ç­¾ï¼ˆä¼šç­¾/æˆ–ç­¾ï¼‰
2. âœ… ä»»åŠ¡è½¬åŠ
3. âœ… ä»»åŠ¡å§”æ´¾
4. âœ… ä»»åŠ¡å›é€€ï¼ˆ3ç§æ–¹å¼ï¼‰
5. âœ… æµç¨‹/ä»»åŠ¡æ’¤å›

**ä»£ç è´¨é‡ï¼š** é«˜  
**æ¶æ„è®¾è®¡ï¼š** æ¸…æ™°  
**ç”¨æˆ·ä½“éªŒï¼š** ä¼˜ç§€  

**ä¸‹ä¸€æ­¥å»ºè®®ï¼š** è¿›è¡ŒåŠŸèƒ½æµ‹è¯•éªŒè¯ï¼Œç¡®ä¿æ‰€æœ‰é«˜çº§æ“ä½œæ­£å¸¸å·¥ä½œã€‚

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š** 2025-11-06  
**æŠ¥å‘Šç‰ˆæœ¬ï¼š** v1.0  
**çŠ¶æ€ï¼š** âœ… å¼€å‘å®Œæˆï¼Œå¾…æµ‹è¯•éªŒè¯

