# âš ï¸ å…³é”®é…ç½®è¯´æ˜ - è¯·å‹¿è¿˜åŸï¼

## ğŸš¨ é‡è¦æç¤º

ä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶çš„ä¿®æ”¹æ˜¯**å¯åŠ¨å¿…éœ€çš„é…ç½®**ï¼Œå¦‚æœè¿˜åŸä¼šå¯¼è‡´æœåŠ¡æ— æ³•å¯åŠ¨ï¼

---

## 1ï¸âƒ£ pom.xml çš„å…³é”®ä¿®æ”¹

### ä¿®æ”¹1ï¼šç‰ˆæœ¬å·ï¼ˆç¬¬38è¡Œï¼‰

âŒ **é”™è¯¯é…ç½®ï¼š**
```xml
<mybatis-plus.version>3.5.10</mybatis-plus.version>
```

âœ… **æ­£ç¡®é…ç½®ï¼š**
```xml
<mybatis-plus.version>3.5.5</mybatis-plus.version>
```

**åŸå› ï¼š** MyBatis-Plus 3.5.10 ä¸ Spring Boot 3.2.0 ä¸å…¼å®¹ï¼Œä¼šå¯¼è‡´ï¼š
```
java.lang.IllegalArgumentException: Invalid value type for attribute 'factoryBeanObjectType': java.lang.String
```

---

### ä¿®æ”¹2ï¼šä¾èµ–åç§°ï¼ˆç¬¬118è¡Œï¼‰

âŒ **é”™è¯¯é…ç½®ï¼š**
```xml
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>${mybatis-plus.version}</version>
</dependency>
```

âœ… **æ­£ç¡®é…ç½®ï¼š**
```xml
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-spring-boot3-starter</artifactId>
    <version>${mybatis-plus.version}</version>
</dependency>
```

**åŸå› ï¼š** `mybatis-plus-spring-boot3-starter` æ˜¯ MyBatis-Plus å®˜æ–¹ä¸º Spring Boot 3.x æä¾›çš„ä¸“ç”¨ä¾èµ–ã€‚

---

## 2ï¸âƒ£ WorkFlowApplication.java çš„å…³é”®ä¿®æ”¹

### æ·»åŠ  @MapperScan æ³¨è§£ï¼ˆç¬¬14è¡Œï¼‰

âŒ **é”™è¯¯é…ç½®ï¼š**
```java
@SpringBootApplication(scanBasePackages = "com.bank.workflow")
public class WorkFlowApplication {
```

âœ… **æ­£ç¡®é…ç½®ï¼š**
```java
@SpringBootApplication(scanBasePackages = "com.bank.workflow")
@MapperScan("com.bank.workflow.infrastructure.persistence.mapper")
public class WorkFlowApplication {
```

**åŸå› ï¼š** `mybatis-plus-spring-boot3-starter` éœ€è¦æ˜¾å¼æŒ‡å®š Mapper æ¥å£æ‰«æè·¯å¾„ï¼Œå¦åˆ™ä¼šå¯¼è‡´ï¼š
```
Parameter 0 of constructor in ... required a bean of type '...Mapper' that could not be found.
```

---

## ğŸ“Š é…ç½®å¯¹æ¯”è¡¨

| é…ç½®é¡¹ | é”™è¯¯å€¼ | æ­£ç¡®å€¼ | ä¸ä¿®æ”¹çš„åæœ |
|--------|--------|--------|-------------|
| mybatis-plus.version | 3.5.10 | **3.5.5** | factoryBeanObjectType é”™è¯¯ |
| artifactId | mybatis-plus-boot-starter | **mybatis-plus-spring-boot3-starter** | factoryBeanObjectType é”™è¯¯ |
| @MapperScan | æ—  | **æœ‰** | Mapper Bean æ‰¾ä¸åˆ° |

---

## ğŸ” ä¸ºä»€ä¹ˆä¼šè¢«è¿˜åŸï¼Ÿ

å¯èƒ½çš„åŸå› ï¼š
1. âŒ åœ¨ IDE ä¸­ä½¿ç”¨äº† "æ’¤é”€" åŠŸèƒ½ï¼ˆCtrl+Z / Cmd+Zï¼‰
2. âŒ ä½¿ç”¨äº† Git çš„ `git checkout` æˆ– `git reset`
3. âŒ IDEA çš„ "æœ¬åœ°å†å²" è¿˜åŸåŠŸèƒ½
4. âŒ ä»å…¶ä»–åˆ†æ”¯åˆå¹¶æ—¶é€‰æ‹©äº†æ—§ç‰ˆæœ¬

---

## âœ… å¦‚ä½•é¿å…å†æ¬¡è¿˜åŸï¼Ÿ

### æ–¹æ³•1ï¼šåœ¨ IDE ä¸­æ ‡è®°ä¸ºé‡è¦æ–‡ä»¶
åœ¨ IDEA ä¸­ï¼Œå¯ä»¥å³é”®æ–‡ä»¶ â†’ "Mark as Important"

### æ–¹æ³•2ï¼šæäº¤åˆ° Git
```bash
cd /Users/yanchao/IdeaProjects/workFolw
git add backend/pom.xml backend/src/main/java/com/bank/workflow/WorkFlowApplication.java
git commit -m "fix: ä¿®å¤ MyBatis-Plus ä¸ Spring Boot 3 çš„å…¼å®¹æ€§é—®é¢˜"
```

### æ–¹æ³•3ï¼šåˆ›å»ºå¤‡ä»½
```bash
cp backend/pom.xml backend/pom.xml.correct
cp backend/src/main/java/com/bank/workflow/WorkFlowApplication.java backend/WorkFlowApplication.java.correct
```

---

## ğŸ¯ éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®

### æ£€æŸ¥ pom.xml
```bash
grep "mybatis-plus.version" backend/pom.xml
# åº”è¯¥è¾“å‡ºï¼š<mybatis-plus.version>3.5.5</mybatis-plus.version>

grep "mybatis-plus-spring-boot3-starter" backend/pom.xml
# åº”è¯¥èƒ½æ‰¾åˆ°è¿™ä¸ªä¾èµ–
```

### æ£€æŸ¥ WorkFlowApplication.java
```bash
grep "@MapperScan" backend/src/main/java/com/bank/workflow/WorkFlowApplication.java
# åº”è¯¥è¾“å‡ºï¼š@MapperScan("com.bank.workflow.infrastructure.persistence.mapper")
```

---

## ğŸ“ é…ç½®å·²ä¿®å¤

âœ… **ç¬¬38è¡Œï¼š** mybatis-plus.version = **3.5.5**  
âœ… **ç¬¬118è¡Œï¼š** artifactId = **mybatis-plus-spring-boot3-starter**  
âœ… **ç¬¬14è¡Œï¼š** æ·»åŠ äº† **@MapperScan** æ³¨è§£

---

## ğŸš€ ä¸‹ä¸€æ­¥

ç°åœ¨é…ç½®å·²æ­£ç¡®ï¼Œè¯·ï¼š

1. **ä¸è¦å†è¿˜åŸè¿™äº›æ–‡ä»¶ï¼**
2. æ‰§è¡Œæ•°æ®åº“é‡ç½®ï¼š
   ```bash
   mysql -u root -p
   > DROP DATABASE IF EXISTS workflow;
   > CREATE DATABASE workflow CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   > EXIT;
   ```
3. é‡æ–°ç¼–è¯‘å¹¶å¯åŠ¨æœåŠ¡

---

## ğŸ†˜ å¦‚æœä¸å°å¿ƒåˆè¿˜åŸäº†æ€ä¹ˆåŠï¼Ÿ

**ç«‹å³é‡æ–°åº”ç”¨è¿™äº›ä¿®æ”¹ï¼š**

```bash
# pom.xml ç¬¬38è¡Œ
3.5.10 â†’ 3.5.5

# pom.xml ç¬¬118è¡Œ  
mybatis-plus-boot-starter â†’ mybatis-plus-spring-boot3-starter

# WorkFlowApplication.java ç¬¬14è¡Œ
æ·»åŠ  @MapperScan("com.bank.workflow.infrastructure.persistence.mapper")
```

æˆ–è€…ç›´æ¥è”ç³»æˆ‘ï¼Œæˆ‘ä¼šå†æ¬¡å¸®ä½ ä¿®å¤ï¼

---

**åˆ›å»ºæ—¶é—´ï¼š** 2025-11-06 10:45  
**çŠ¶æ€ï¼š** é…ç½®å·²ä¿®å¤ï¼Œè¯·ä¿æŒè¿™äº›ä¿®æ”¹ï¼  
**âš ï¸ è­¦å‘Šï¼š** è¯·ä¸è¦ä½¿ç”¨æ’¤é”€åŠŸèƒ½æˆ–è¿˜åŸè¿™äº›æ–‡ä»¶ï¼

