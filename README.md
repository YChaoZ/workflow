# ğŸš€ ä¼ä¸šçº§å·¥ä½œæµç³»ç»Ÿ (Workflow System)

[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.2.0-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![Flowable](https://img.shields.io/badge/Flowable-7.0.1-blue.svg)](https://www.flowable.com/)
[![Vue](https://img.shields.io/badge/Vue-3.5.22-4FC08D.svg)](https://vuejs.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

> åŸºäº **Spring Boot 3.2** + **Flowable 7.0** + **Vue 3** + **Element Plus** æ„å»ºçš„ç°ä»£åŒ–ä¼ä¸šçº§å·¥ä½œæµç®¡ç†ç³»ç»Ÿ

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

å·¥ä½œæµç³»ç»Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ¶æ„æ¸…æ™°ã€æ˜“äºæ‰©å±•çš„ä¼ä¸šçº§å·¥ä½œæµç®¡ç†å¹³å°ã€‚é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒå¯è§†åŒ–æµç¨‹è®¾è®¡ã€æµç¨‹å®ä¾‹ç®¡ç†ã€ä»»åŠ¡å¤„ç†ã€æµç¨‹ç›‘æ§ç­‰å®Œæ•´åŠŸèƒ½ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¨ **å¯è§†åŒ–æµç¨‹è®¾è®¡å™¨** - åŸºäºBPMN.jsï¼Œæ”¯æŒæ‹–æ‹½å¼æµç¨‹è®¾è®¡
- ğŸ“Š **æµç¨‹ç®¡ç†** - æµç¨‹å®šä¹‰ã€ç‰ˆæœ¬ç®¡ç†ã€åˆ†ç±»ç®¡ç†
- ğŸ“ **ä»»åŠ¡ç®¡ç†** - å¾…åŠä»»åŠ¡ã€å·²åŠä»»åŠ¡ã€ä»»åŠ¡è½¬åŠã€å§”æ´¾ã€åŠ ç­¾
- ğŸ”„ **æµç¨‹å®ä¾‹** - æµç¨‹è·Ÿè¸ªã€æµç¨‹å›¾é«˜äº®æ˜¾ç¤ºã€å†å²è®°å½•
- ğŸ’¬ **ä»»åŠ¡æ„è§** - å®¡æ‰¹æ„è§ã€è¯„è®ºåŠŸèƒ½
- ğŸ“ **ä»»åŠ¡é™„ä»¶** - æ–‡ä»¶ä¸Šä¼ ã€é™„ä»¶ç®¡ç†
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** - åŸºäºJWTçš„èº«ä»½è®¤è¯
- ğŸ¯ **COLAæ¶æ„** - æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Spring Boot | 3.2.0 | æ ¸å¿ƒæ¡†æ¶ |
| Flowable | 7.0.1 | å·¥ä½œæµå¼•æ“ |
| MyBatis-Plus | 3.5.9 | ORMæ¡†æ¶ |
| MySQL | 8.0.33 | æ•°æ®åº“ |
| Druid | 1.2.23 | æ•°æ®åº“è¿æ¥æ±  |
| JWT | 0.12.3 | èº«ä»½è®¤è¯ |
| Flyway | 9.22.3 | æ•°æ®åº“ç‰ˆæœ¬ç®¡ç† |
| Lombok | 1.18.30 | ä»£ç ç®€åŒ– |

### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Vue | 3.5.22 | æ¸è¿›å¼æ¡†æ¶ |
| Element Plus | 2.4.4 | UIç»„ä»¶åº“ |
| Vue Router | 4.2.5 | è·¯ç”±ç®¡ç† |
| Pinia | 2.1.7 | çŠ¶æ€ç®¡ç† |
| Axios | 1.6.2 | HTTPå®¢æˆ·ç«¯ |
| **bpmn-js** | **17.0.2** | **BPMNæµç¨‹è®¾è®¡å™¨** |
| TypeScript | 5.3.0 | ç±»å‹ç³»ç»Ÿ |
| Vite | 5.0.0 | æ„å»ºå·¥å…· |

## ğŸ“ é¡¹ç›®ç»“æ„

```
workflow/
â”œâ”€â”€ backend/                    # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â”‚   â””â”€â”€ com/bank/workflow/
â”‚   â”‚       â”œâ”€â”€ adapter/       # é€‚é…å±‚ï¼ˆControllerï¼‰
â”‚   â”‚       â”œâ”€â”€ app/           # åº”ç”¨å±‚ï¼ˆServiceï¼‰
â”‚   â”‚       â”œâ”€â”€ domain/        # é¢†åŸŸå±‚ï¼ˆEntity/Gatewayï¼‰
â”‚   â”‚       â””â”€â”€ infrastructure/# åŸºç¡€è®¾æ–½å±‚ï¼ˆMapper/Configï¼‰
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â”œâ”€â”€ application.yml
â”‚   â”‚   â””â”€â”€ db/migration/     # Flywayæ•°æ®åº“è„šæœ¬
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ frontend/                   # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/              # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ components/       # ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ BpmnDesigner/ # æµç¨‹è®¾è®¡å™¨
â”‚   â”‚   â”‚   â””â”€â”€ BpmnViewer/   # æµç¨‹å›¾æŸ¥çœ‹å™¨
â”‚   â”‚   â”œâ”€â”€ views/            # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ router/           # è·¯ç”±
â”‚   â”‚   â””â”€â”€ store/            # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â””â”€â”€ doc/                        # æ–‡æ¡£
    â”œâ”€â”€ 01-å·¥ä½œæµå¼•æ“é€‰å‹åˆ†æ.md
    â”œâ”€â”€ 02-å‰ç«¯æŠ€æœ¯æ ˆé€‰å‹åˆ†æ.md
    â”œâ”€â”€ 03-æœ€ä½³å®ç°æ–¹æ¡ˆ.md
    â””â”€â”€ 04-é¡¹ç›®å®æ–½è·¯çº¿å›¾.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **JDK:** 17+
- **Maven:** 3.6+
- **Node.js:** 16+
- **MySQL:** 8.0+

### 1. æ•°æ®åº“å‡†å¤‡

```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE workflow CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 2. åç«¯å¯åŠ¨

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# ä¿®æ”¹é…ç½®æ–‡ä»¶
# ç¼–è¾‘ src/main/resources/application-dev.yml
# é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯

# ç¼–è¯‘é¡¹ç›®
mvn clean package -DskipTests

# å¯åŠ¨æœåŠ¡
java -jar target/workflow-system-1.0.0-SNAPSHOT.jar --spring.profiles.active=dev

# æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬
./å¯åŠ¨è„šæœ¬.sh
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:9099` å¯åŠ¨

**æ¥å£æ–‡æ¡£ï¼š** http://localhost:9099/doc.html

### 3. å‰ç«¯å¯åŠ¨

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯åº”ç”¨å°†åœ¨ `http://localhost:5173` å¯åŠ¨

### 4. ç™»å½•ç³»ç»Ÿ

- **URL:** http://localhost:5173
- **ç”¨æˆ·å:** `admin`
- **å¯†ç :** `admin123`

## ğŸ“– åŠŸèƒ½è¯´æ˜

### æµç¨‹è®¾è®¡å™¨

ä½¿ç”¨BPMN.jså®ç°çš„å¯è§†åŒ–æµç¨‹è®¾è®¡å™¨ï¼Œæ”¯æŒï¼š

- æ‹–æ‹½å¼è®¾è®¡æµç¨‹
- é…ç½®èŠ‚ç‚¹å±æ€§
- å¯¼å‡ºBPMN XML
- å¯¼å‡ºSVGå›¾ç‰‡
- æµç¨‹é¢„è§ˆ

### æµç¨‹ç®¡ç†

- **æµç¨‹å®šä¹‰ç®¡ç†** - éƒ¨ç½²ã€ç¼–è¾‘ã€åˆ é™¤ã€å¯ç”¨/ç¦ç”¨æµç¨‹
- **æµç¨‹åˆ†ç±»** - åˆ†ç±»ç»„ç»‡æµç¨‹å®šä¹‰
- **ç‰ˆæœ¬ç®¡ç†** - æµç¨‹ç‰ˆæœ¬æ§åˆ¶å’Œå›æ»š
- **æµç¨‹å®ä¾‹** - æŸ¥çœ‹è¿è¡Œä¸­çš„æµç¨‹å®ä¾‹

### ä»»åŠ¡ç®¡ç†

- **å¾…åŠä»»åŠ¡** - å¤„ç†åˆ†é…ç»™è‡ªå·±çš„ä»»åŠ¡
- **å·²åŠä»»åŠ¡** - æŸ¥çœ‹å·²å®Œæˆçš„ä»»åŠ¡
- **ä»»åŠ¡æ“ä½œ** - å®Œæˆã€è½¬åŠã€å§”æ´¾ã€åŠ ç­¾ã€é€€å›
- **ä»»åŠ¡æ„è§** - æ·»åŠ å®¡æ‰¹æ„è§å’Œè¯„è®º
- **ä»»åŠ¡é™„ä»¶** - ä¸Šä¼ å’Œç®¡ç†é™„ä»¶

### æµç¨‹ç›‘æ§

- **æµç¨‹å›¾é«˜äº®** - å®æ—¶æ˜¾ç¤ºæµç¨‹æ‰§è¡Œè¿›åº¦
- **å†å²è®°å½•** - å®Œæ•´çš„æµç¨‹æ‰§è¡Œå†å²
- **ä»»åŠ¡æ—¶é—´çº¿** - å¯è§†åŒ–ä»»åŠ¡å¤„ç†è¿‡ç¨‹

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### COLAåˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Adapter Layer               â”‚  é€‚é…å±‚
â”‚    (Controller/MQ/Schedule)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         App Layer                   â”‚  åº”ç”¨å±‚
â”‚    (Service/Command/Query)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Domain Layer                â”‚  é¢†åŸŸå±‚
â”‚    (Entity/ValueObject/Gateway)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Infrastructure Layer           â”‚  åŸºç¡€è®¾æ–½å±‚
â”‚  (Mapper/Gateway Impl/Config)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vue 3 +    â”‚â”€â”€â”€â”€â–¶â”‚  Spring Boot â”‚
â”‚ Element Plus â”‚     â”‚   REST API   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   Flowable   â”‚
                     â”‚    Engine    â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚    MySQL     â”‚
                     â”‚   Database   â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š æ•°æ®åº“è®¾è®¡

ç³»ç»ŸåŒ…å«ä»¥ä¸‹ä¸»è¦æ•°æ®è¡¨ï¼š

### ä¸šåŠ¡è¡¨
- `wf_user` - ç”¨æˆ·è¡¨
- `wf_process_category` - æµç¨‹åˆ†ç±»è¡¨
- `wf_task_comment` - ä»»åŠ¡æ„è§è¡¨
- `wf_task_attachment` - ä»»åŠ¡é™„ä»¶è¡¨

### Flowableå¼•æ“è¡¨
- `ACT_RE_*` - æµç¨‹å®šä¹‰è¡¨ï¼ˆRepositoryï¼‰
- `ACT_RU_*` - è¿è¡Œæ—¶è¡¨ï¼ˆRuntimeï¼‰
- `ACT_HI_*` - å†å²è¡¨ï¼ˆHistoryï¼‰
- `ACT_ID_*` - èº«ä»½è¡¨ï¼ˆIdentityï¼‰

## ğŸ”§ é…ç½®è¯´æ˜

### åç«¯é…ç½®

ä¸»è¦é…ç½®æ–‡ä»¶ï¼š`backend/src/main/resources/application-dev.yml`

```yaml
# æ•°æ®åº“é…ç½®
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/workflow
    username: your_username
    password: your_password

# Flowableé…ç½®
flowable:
  database-schema-update: true
  async-executor-activate: true
```

### å‰ç«¯é…ç½®

ä¸»è¦é…ç½®æ–‡ä»¶ï¼š`frontend/src/api/request.ts`

```typescript
// APIåŸºç¡€URL
const BASE_URL = 'http://localhost:9099'
```

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æµç¨‹

1. åœ¨æµç¨‹è®¾è®¡å™¨ä¸­è®¾è®¡æµç¨‹
2. å¯¼å‡ºBPMN XMLæ–‡ä»¶
3. åœ¨æµç¨‹å®šä¹‰ç®¡ç†ä¸­éƒ¨ç½²
4. å¯åŠ¨æµç¨‹å®ä¾‹è¿›è¡Œæµ‹è¯•

### è‡ªå®šä¹‰æµç¨‹èŠ‚ç‚¹

å‚è€ƒ Flowable å®˜æ–¹æ–‡æ¡£è¿›è¡ŒèŠ‚ç‚¹æ‰©å±•

### APIå¼€å‘

éµå¾ª COLA æ¶æ„è§„èŒƒï¼š

1. **Adapterå±‚** - å®šä¹‰Controllerå’ŒDTO
2. **Appå±‚** - å®šä¹‰Command/Queryå’ŒService
3. **Domainå±‚** - å®šä¹‰Entityå’ŒGatewayæ¥å£
4. **Infrastructureå±‚** - å®ç°Gatewayå’ŒMapper

## ğŸ§ª æµ‹è¯•

### åç«¯æµ‹è¯•

```bash
cd backend
mvn test
```

### å‰ç«¯æµ‹è¯•

```bash
cd frontend
npm run test
```

## ğŸ“¦ éƒ¨ç½²

### Dockeréƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker-compose build

# å¯åŠ¨æœåŠ¡
docker-compose up -d
```

### ä¼ ç»Ÿéƒ¨ç½²

1. ç¼–è¯‘åç«¯ï¼š`mvn clean package`
2. æ„å»ºå‰ç«¯ï¼š`npm run build`
3. éƒ¨ç½²jaråŒ…å’Œdistç›®å½•åˆ°æœåŠ¡å™¨

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®åœ°å€ï¼š** https://github.com/YChaoZ/workflow
- **é—®é¢˜åé¦ˆï¼š** https://github.com/YChaoZ/workflow/issues

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [Spring Boot](https://spring.io/projects/spring-boot)
- [Flowable](https://www.flowable.com/)
- [Vue.js](https://vuejs.org/)
- [Element Plus](https://element-plus.org/)
- [bpmn-js](https://bpmn.io/toolkit/bpmn-js/)
- [COLA](https://github.com/alibaba/COLA)

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ªæ˜Ÿæ ‡æ”¯æŒï¼**
